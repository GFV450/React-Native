<script>
var cart = [];
    
function addItem(id, name, price, qty) {
    var newItem = {
        id: id, 
        name: name,
        price: price,
        qty: qty
    }
    
    var itemExists = false;
    
    var newCart = cart.map(function(item) {
        if (item.id === newItem.id) {
            item.qty ++;
            itemExists = true;
        } 
        
        return item;
    });
    
    if (!itemExists) {
        newCart.push(newItem);
    }
    
    cart = newCart;
}
    
addItem(1, 'Pencil', 1.99, 1);
addItem(1, 'Pencil', 1.99, 1);
addItem(2, 'Apple', 0.99, 1);
addItem(3, 'Banana', 1.10, 1);
addItem(4, 'Shoe', 11.99, 1);
addItem(4, 'Shoe', 11.99, 1);
console.log(displayCart());
console.log(cart);
    
function removeItem(id) {
    var newCart = cart.map(function(item) {
        if (item.id === id) {
            item.qty --;
        }
        return item;
    });
    
    newCart = newCart.filter(function(item) {
        return item.qty > 0;
    })
    
    cart = newCart;
}

removeItem(1);
removeItem(1);

console.log(cart);
    
function displayCart() {
    return cart.map(function(item) {
        item.total = item.qty * item.price;
        return item;
    });
}
    
console.log("- display cart -");
console.log(displayCart());
    
function getCartCount() {
    var count = cart.reduce(function(acc, item) {
        return acc + item.qty;
    }, 0);
    return count;
}
    
console.log(getCartCount());
    
function getCartTotal() {
    var total = cart.reduce(function(acc, item) {
        return acc + item.qty * item.price;
    }, 0);
    return total;
}
    
console.log(getCartTotal());
    
</script>